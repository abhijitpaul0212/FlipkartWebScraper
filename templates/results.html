{% extends "base.html" %}
{% block content %}
    <div class="loader"></div>
    <h1>Search Results</h1> <a href="{{ url_for('home') }}">HOME</a>
    <div>
        <table class="table">
            <tr class="table__header">
                {% for heading in product_headings %}
                    <th class="table__cell">{{ heading }}</th>
                {% endfor %}
                <th class="table__cell"> Customer Review </th>

            </tr>
            {% for row in results %}
            <tr class="table__row">
                {% for key in row.keys() %}
                    <td class="table__cell"> 
                        {% if key == "Review Section" %}
                            <table class="table">
                                <tr class="table__header">
                                    {% for heading in review_headings %}
                                        <th class="table__cell">{{ heading }}</th>
                                    {% endfor %}
                                </tr>
                                {% for k_row in row[key] %}
                                <tr class="table__row__cascade">
                                    {% for k_key in k_row.keys() %}
                                        <td class="table__cell"> 
                                            {{ k_row[k_key] | capitalize }}
                                        </td>
                                    {% endfor %}
                                </tr>
                                {% endfor %}
                            </table>
                        {% else %}
                            {{ row[key] }}
                        {% endif %}
                    </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </table>
    </div>
{% endblock %}